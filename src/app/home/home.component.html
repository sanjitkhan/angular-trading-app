<div class="home-container">
  <div class="market-container mat-elevation-z8">
    
    <!-- Loader -->
    <div *ngIf="isLoadingResults || isRateLimitReached" class="market-loader">
      <mat-spinner class="center" *ngIf="isLoadingResults"></mat-spinner>
      <div *ngIf="isRateLimitReached">
        Bitbns API rate limit has been reached. It will be reset in one minute.
      </div>
    </div>
    <!-- End of Loader -->
    <!-- Table -->
    <div class="market-table-container" *ngIf="!isLoadingResults">
      <!-- Table header -->
      <div class="market-table-header">
        <mat-label>MARKET</mat-label>
        <mat-form-field appearance="outline">
          <input matInput (keyup)="applyFilter($event)" placeholder="Search" #input>
          <button *ngIf="input.value" matSuffix mat-icon-button aria-label="Clear" (click)="input.value=''">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
      </div>
      <!-- End of Table header -->

      <!-- Table Body -->
      <div class="market-table-body">
        <table class="market-table" mat-table [dataSource]="dataSource"
          matSort matSortActive="{{marketTableColumns[0].id}}" matSortDisableClear matSortDirection="asc">
          
          <ng-container *ngFor="let column of marketTableColumns" matColumnDef="{{column.id}}">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{column.label}}</th>
            <td mat-cell *matCellDef="let row">{{row[column.id]}}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

          <!-- Row shown when there is no matching data. -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell market-table-no-data-cell" colspan="10%">No data matching the filter "{{input.value || ''}}"</td>
          </tr>
        </table>
      </div>
      <!-- End of Table Body -->
    </div>
    <!-- End of Table -->
  </div>
</div>